:root{
  --bg:#0c1222; --bg-soft:#111a33; --card:#152043; --text:#e7f0ff; --muted:#a3b0c7;
  --accent:#e64564; --accent-2:#2ad1ff; --success:#35d399; --warn:#f59e0b;
  --shadow:0 10px 25px rgba(0,0,0,.25); --xmas-grad:linear-gradient(90deg,#c81e1e,#16a34a);
}
[data-theme="light"]{
  --bg:#f5f7fb; --bg-soft:#fff; --card:#fff; --text:#1b2430; --muted:#556072;
  --accent:#c2185b; --accent-2:#0ea5e9; --success:#16a34a; --warn:#d97706;
}
html,body{height:100%} body{margin:0; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; background:var(--bg); color:var(--text);}
.app-wrap{min-height:100%; display:grid; grid-template-rows:auto 1fr auto;}
header{position:sticky; top:0; z-index:20; display:flex; align-items:center; gap:.75rem; justify-content:space-between; padding:12px 16px; background:linear-gradient(180deg,rgba(0,0,0,.25),transparent),var(--bg-soft); box-shadow:var(--shadow);}
.brand{display:flex; align-items:center; gap:.75rem;} .logo{width:36px; height:36px; border-radius:10px; display:grid; place-items:center; font-size:22px;}
header nav{display:flex; gap:.5rem; align-items:center}
.btn,button{appearance:none; border:none; outline:none; border-radius:14px; padding:.6rem .9rem; background:var(--accent); color:#fff; font-weight:600; cursor:pointer; box-shadow:var(--shadow); text-decoration:none;}
.btn.secondary{background:var(--card); color:var(--text); border:1px solid rgba(255,255,255,.08)}
.btn.ghost{background:transparent; color:var(--text); border:1px solid rgba(255,255,255,.15)}
.btn.small{padding:.45rem .7rem; border-radius:12px; font-size:.875rem}
.btn.active{outline:2px solid rgba(255,255,255,.3)}
main{position:relative; z-index:1; padding:16px; display:grid; gap:16px; max-width:1100px; margin-inline:auto}
.card{background:var(--card); border-radius:22px; padding:16px; box-shadow:var(--shadow); border:1px solid rgba(255,255,255,.06)}
.card h2{margin:.3rem 0 .75rem 0; font-size:1.05rem}
.muted{color:var(--muted); font-size:.9rem}
.stack{display:flex; flex-direction:column; gap:10px}
.row{display:flex; gap:10px; align-items:center}
.input{background:var(--bg); border:1px solid rgba(255,255,255,.12); color:var(--text); padding:.7rem .8rem; border-radius:12px; width:100%}
.progress{height:14px; background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(0,0,0,.08)); border-radius:999px; position:relative; overflow:hidden}
.progress .bar{height:100%; width:0%; background:var(--xmas-grad); transition:width .7s ease}
.leaderboard-item{display:grid; grid-template-columns:36px 52px 1fr auto; gap:12px; align-items:center}
.medal-big{font-size:1.6rem; line-height:1} .avatar{width:52px; height:52px; border-radius:15px; background:linear-gradient(45deg,#f5f5dc,#fff); display:grid; place-items:center; font-weight:800; color:#000; overflow:hidden}
.pill{display:inline-block; margin-left:.5rem; padding:.15rem .5rem; font-size:.75rem; border-radius:999px; background:transparent; color:var(--text); border:1px solid rgba(255,255,255,.28)}
/* === Tabs – default === */
.tabs .tab {
  border: 1px solid rgba(0,0,0,.1);
  background: var(--tab-bg-inactive, rgba(255,255,255,.6));
  color: var(--tab-fg-inactive, #222);
  padding: 8px 12px;
  border-radius: 10px;
}
.tabs .tab.active {
  background: var(--tab-bg-active, rgba(0,0,0,.08));
  color: var(--tab-fg-active, #111);
  border-color: rgba(0,0,0,.2);
}

/* === Tabs – dark overrides === */
[data-theme="dark"] .tabs .tab {
  background: var(--tab-bg-inactive, rgba(255,255,255,.06));
  color: var(--tab-fg-inactive, #dfe6f3);
  border-color: rgba(255,255,255,.14);
}
[data-theme="dark"] .tabs .tab.active {
  background: var(--tab-bg-active, rgba(255,255,255,.12));
  color: var(--tab-fg-active, #fff);
  border-color: rgba(255,255,255,.22);
}

/* drobná úprava pro přístupnost při focuse */
.tabs .tab:focus-visible {
  outline: 2px solid #4da3ff;
  outline-offset: 2px;
}

.account{display:inline-flex; align-items:center; gap:8px; padding:6px 8px; border:1px solid rgba(255,255,255,.15); border-radius:999px; background:var(--card);}
.account .miniavatar{width:22px; height:22px; border-radius:999px; overflow:hidden; display:grid; place-items:center; font-weight:700; font-size:.75rem; background:rgba(255,255,255,.85); color:#111}
.footer{opacity:.7; padding:10px 16px; font-size:.85rem}
.bg-illustration{position:fixed; inset:0; z-index:0; opacity:.25; background:
  radial-gradient(60% 35% at 50% 105%, rgba(255,255,255,.35), transparent 70%),
  linear-gradient(to top, #0b1330 0%, transparent 60%); }
#snow{position:fixed; inset:0; pointer-events:none; z-index:0}
.hidden{display:none}
main { margin-top: 12px; }
/* === Theme vars for snow & bg illustration === */
[data-theme="dark"] {
  --snow-color: rgba(255,255,255,0.95);
  --bg-sky:    #0b1220;
  --bg-hill:   #111a2e;
  --bg-hill2:  #0d1628;
  --bg-accent: #bcd2ff; /* knoflíky/ruce sněhuláka */
}

[data-theme="light"] {
  /* lehce tmavší sníh pro kontrast na světle */
  --snow-color: rgba(80,100,140,0.9);
  --bg-sky:    #eaf6ff;
  --bg-hill:   #d9f0ff;
  --bg-hill2:  #cfe8ff;
  --bg-accent: #5b6b8b;
}

/* vrstvy: ilustrace pod, pak sníh, pak UI */
.bg-illustration {
  position: fixed;
  inset: 0;
  z-index: 0;
  pointer-events: none;
}
#snow {
  position: fixed;
  inset: 0;
  z-index: 1;
  pointer-events: none;
}
header, main, footer {
  position: relative;
  z-index: 2;
}
.brand .logo {
  width: 42px;           /* původní velikost komety */
  height: 42px;
  object-fit: contain;
  vertical-align: middle;
  margin-right: 10px;
  filter: drop-shadow(0 0 3px rgba(0,0,0,0.25));
}
/* === Avatary === */
.avatar {
  display:inline-flex; align-items:center; justify-content:center;
  border-radius:50%; overflow:hidden; user-select:none;
  box-shadow:0 1px 2px rgba(0,0,0,.25);
}
.avatar-sm { width:28px; height:28px; font-size:.8rem; }
.avatar-md { width:40px; height:40px; font-size:1rem; }
.avatar-lg { width:72px; height:72px; font-size:1.2rem; }
.avatar img { width:100%; height:100%; object-fit:cover; display:block; }
.avatar-initials {
  width:100%; height:100%; display:flex; align-items:center; justify-content:center;
  font-weight:800; color:#fff; letter-spacing:.5px;
  text-shadow:0 1px 2px rgba(0,0,0,.25);
}

/* Kontejner avatáru u účtu v headeru */
.account { display:inline-flex; align-items:center; gap:8px; }

/* === Modal – výběr avataru === */
.modal-overlay{
  position:fixed; inset:0; background:rgba(0,0,0,.45); z-index:50;
  display:flex; align-items:center; justify-content:center; padding:16px;
}
.modal{
  width:min(900px, 96vw); max-height:90vh; overflow:auto;
  background:var(--card); border-radius:16px; padding:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.35);
}
.modal .grid{
  display:grid; gap:12px; grid-template-columns:repeat(auto-fill, minmax(110px,1fr));
}
.modal .cell{ display:flex; flex-direction:column; gap:8px; align-items:center }
.modal .thumb{
  width:110px; height:110px; border-radius:999px; overflow:hidden;
  border:2px solid transparent; cursor:pointer;
  transition:transform .15s ease, border-color .15s ease;
}
.modal .thumb:hover{ transform:scale(1.03); }
.modal .thumb.selected{ border-color:#4da3ff; }
.modal .actions{ display:flex; gap:8px; justify-content:flex-end; margin-top:12px }

/* === Markdown editor / preview === */
.md-help {
  font-size: .9rem;
  color: var(--muted);
}
.md-preview {
  background: rgba(0,0,0,.04);
  border: 1px solid rgba(0,0,0,.08);
  border-radius: 10px;
  padding: 10px;
  overflow: auto;
  max-height: 200px;
}
[data-theme="dark"] .md-preview {
  background: rgba(255,255,255,.05);
  border-color: rgba(255,255,255,.12);
}
.md-preview blockquote {
  margin: .4rem 0;
  padding: .2rem .6rem;
  border-left: 3px solid rgba(0,0,0,.25);
  opacity: .9;
}
[data-theme="dark"] .md-preview blockquote {
  border-left-color: rgba(255,255,255,.35);
}
.md-preview ul { margin: .4rem 1.2rem; }
.md-preview code {
  background: rgba(0,0,0,.08);
  padding: .1rem .3rem;
  border-radius: 6px;
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
}
[data-theme="dark"] .md-preview code {
  background: rgba(255,255,255,.08);
}

/* Hodnosti – titulní řádek + pilulka “získána” */
.rank-title {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}
.pill.trophy {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 2px 10px;
  border-radius: 999px;
  font-weight: 800;        /* tučně */
  font-size: 1em;          /* stejná velikost jako titulek */
  line-height: 1.1;
  color: #fff;
  background: linear-gradient(135deg, #ff7a18, #ffb347);
  box-shadow: 0 1px 2px rgba(0,0,0,.2);
}

